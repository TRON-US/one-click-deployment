(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f1a952"],{6505:function(t,n,e){"use strict";e.r(n);var s=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container"},[e("div",{staticClass:"tron-content"},[e("div",{staticClass:"tron-filter-section"},[e("div",[e("el-steps",{attrs:{active:t.currentStep,"align-center":"",type:"mini"}},[e("el-step",{attrs:{title:t.$t("tronPluginConsensusModule")},nativeOn:{click:function(n){return t.stepClickFun(1)}}}),t._v(" "),e("el-step",{attrs:{title:t.$t("tronPluginTransactionModule")},nativeOn:{click:function(n){return t.stepClickFun(2)}}}),t._v(" "),e("el-step",{attrs:{title:t.$t("tronPluginDatabaseModule")},nativeOn:{click:function(n){return t.stepClickFun(3)}}})],1)],1)]),t._v(" "),1==t.currentStep?e("el-form",{ref:"pluginOnsensusDialogForm",staticClass:"pluginSettingForm",attrs:{model:t.pluginOnsensusForm,rules:t.pluginRules,"label-position":"left"}},[e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{on:{click:function(n){t.baseContentShow=!t.baseContentShow}}},[e("i",{class:t.baseContentShow?"el-icon-arrow-down":"el-icon-arrow-right"}),t._v("\n                            "+t._s(t.$t("tronPluginConsensusModule"))+"\n                        ")]),t._v(" "),t.baseContentShow?e("div",{staticClass:"pluginSettingFormContent"},[e("el-form-item",{staticClass:"baseFormItem mgt30",attrs:{prop:"consensus"}},[e("el-radio-group",{model:{value:t.pluginOnsensusForm.consensus,callback:function(n){t.$set(t.pluginOnsensusForm,"consensus",n)},expression:"pluginOnsensusForm.consensus"}},[e("el-radio",{attrs:{label:"dpos"}},[t._v("DPOS")]),t._v(" "),e("el-radio",{attrs:{label:"pbft"}},[t._v("PBFT")]),t._v(" "),e("br"),t._v(" "),e("el-radio",{staticStyle:{margin:"15px 0"},attrs:{label:3}},[t._v(t._s(t.$t("tronPluginCustomConsensusModule"))+"：")])],1),t._v(" "),e("br"),t._v(" "),e("el-input",{staticClass:"pluginSettingFormInput",attrs:{size:"small",maxlength:50,placeholder:t.$t("tronPluginCustomConsensusModulePlaceholder")},model:{value:t.pluginOnsensusForm.consensusContent,callback:function(n){t.$set(t.pluginOnsensusForm,"consensusContent",n)},expression:"pluginOnsensusForm.consensusContent"}})],1)],1):t._e()])],1)],1),t._v(" "),e("el-form-item",{staticClass:"textRight",attrs:{"label-width":"0"}},[e("router-link",{attrs:{to:{path:"/setting/list"}}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.$t("tronSettingPreviousStep")))])],1),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return t.saveData("pluginOnsensusDialogForm")}}},[t._v(t._s(t.$t("tronSettingNextStep")))])],1)],1):t._e(),t._v(" "),2==t.currentStep?e("el-form",{ref:"transcationDialogForm",staticClass:"transcationDialogForm",attrs:{model:t.pluginTransactionForm,rules:t.transcationRules,"label-position":"left"}},[e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{on:{click:function(n){t.transcationContentShow=!t.transcationContentShow}}},[e("i",{class:t.transcationContentShow?"el-icon-arrow-down":"el-icon-arrow-right"}),t._v("\n                            "+t._s(t.$t("tronPluginTransactionModule"))+"\n                        ")]),t._v(" "),t.transcationContentShow?e("div",{staticClass:"transcationDialogFormContent"},[e("el-form-item",{staticClass:"baseFormItem mgt20",attrs:{prop:"transaction"}},[e("el-checkbox-group",{model:{value:t.pluginTransactionForm.transaction,callback:function(n){t.$set(t.pluginTransactionForm,"transaction",n)},expression:"pluginTransactionForm.transaction"}},[t._l(t.transactionCheckNodeAry,(function(n,s){return e("el-checkbox",{key:s,attrs:{label:n.value}},[t._v(t._s(n.label))])})),t._v(" "),e("br"),t._v(" "),e("el-checkbox",{staticStyle:{margin:"0"},attrs:{label:9}},[t._v(t._s(t.$t("tronPluginCustomTradingModule")))]),t._v(" "),e("br"),t._v(" "),e("el-input",{staticClass:"pluginSettingFormInput",attrs:{size:"small",maxlength:50,placeholder:t.$t("tronPluginCustomTradingModulePlaceholder")},model:{value:t.pluginTransactionForm.transactionContent,callback:function(n){t.$set(t.pluginTransactionForm,"transactionContent",n)},expression:"pluginTransactionForm.transactionContent"}})],2)],1)],1):t._e()])],1)],1),t._v(" "),e("el-form-item",{staticClass:"textRight",attrs:{"label-width":"0"}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return t.previousStepFun()}}},[t._v(t._s(t.$t("tronSettingPreviousStep")))]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return t.saveTranstionData("transcationDialogForm")}}},[t._v(t._s(t.$t("tronSettingNextStep")))])],1)],1):t._e(),t._v(" "),3==t.currentStep?e("el-form",{ref:"dbFormDialogForm",staticClass:"dbSettingForm",attrs:{model:t.plugindbForm,rules:t.plugindbRules,"label-position":"left"}},[3==t.currentStep?e("el-row",{attrs:{gutter:12}},[e("el-col",{attrs:{span:24}},[e("el-card",{attrs:{shadow:"hover"}},[e("div",{on:{click:function(n){t.dbsettingContentShow=!t.dbsettingContentShow}}},[e("i",{class:t.dbsettingContentShow?"el-icon-arrow-down":"el-icon-arrow-right"}),t._v("\n                            "+t._s(t.$t("tronPluginTransactionModule"))+"\n                        ")]),t._v(" "),t.dbsettingContentShow?e("div",{staticStyle:{"padding-left":"20px"}},[e("el-form-item",{staticClass:"baseFormItem mgt30",attrs:{prop:"dbsetting"}},[e("el-radio-group",{model:{value:t.plugindbForm.dbsetting,callback:function(n){t.$set(t.plugindbForm,"dbsetting",n)},expression:"plugindbForm.dbsetting"}},[e("el-radio",{attrs:{label:"leveldb"}},[t._v("leveldb")]),t._v(" "),e("el-radio",{attrs:{label:"rockdb"}},[t._v("rockdb")]),t._v(" "),e("br"),t._v(" "),e("el-radio",{staticStyle:{margin:"15px 0"},attrs:{label:3}},[t._v(t._s(t.$t("tronPluginCustomDatabaseModule")))])],1),t._v(" "),e("br"),t._v(" "),e("el-input",{staticClass:"pluginSettingFormInput",attrs:{size:"small",maxlength:50,placeholder:t.$t("tronPluginCustomDatabaseModulePlaceholder")},model:{value:t.plugindbForm.dbsettingContent,callback:function(n){t.$set(t.plugindbForm,"dbsettingContent",n)},expression:"plugindbForm.dbsettingContent"}})],1)],1):t._e()])],1)],1):t._e(),t._v(" "),e("el-form-item",{staticClass:"textRight",attrs:{"label-width":"0"}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return t.previousStepFun()}}},[t._v(t._s(t.$t("tronSettingPreviousStep")))]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(n){return t.saveDBData("dbFormDialogForm")}}},[t._v(t._s(t.$t("tronSettingNextStep")))])],1)],1):t._e()],1)])},a=[],r=(e("ac6a"),e("c5f6"),e("75fc")),o=e("b775");function i(){return Object(o["a"])({url:"/pluginConfig",method:"get"})}function l(t){return Object(o["a"])({url:"/dbEngine",method:"post",params:t})}function u(t){return Object(o["a"])({url:"/transaction",headers:{"Content-Type":"application/json"},transformRequest:[function(t){return t=JSON.stringify(t),t}],method:"post",data:t})}function c(t){return Object(o["a"])({url:"/consensus",method:"post",params:t})}var g={name:"pluginlist",data:function(){return{currentStep:1,baseContentShow:!0,transcationContentShow:!0,dbsettingContentShow:!0,pluginOnsensusForm:{consensus:"dpos",consensusContent:""},pluginTransactionForm:{transaction:[],transactionContent:""},transactionCheckNodeAry:[{label:"AccountPermissionUpdate",value:"AccountPermissionUpdateActuator"},{label:"AssetIssue",value:"AssetIssueActuator"},{label:"ClearABIContract",value:"ClearABIContractActuator"},{label:"CreateAccount",value:"CreateAccountActuator"},{label:"ExchangeCreate",value:"ExchangeCreateActuator"},{label:"ExchangeInject",value:"ExchangeInjectActuator"},{label:"ExchangeTransaction",value:"ExchangeTransactionActuator"},{label:"ExchangeWithdraw",value:"ExchangeWithdrawActuator"},{label:"FreezeBalance",value:"FreezeBalanceActuator"},{label:"ParticipateAssetIssue",value:"ParticipateAssetIssueActuator"},{label:"ProposalApprove",value:"ProposalApproveActuator"},{label:"ProposalCreate",value:"ProposalCreateActuator"},{label:"ProposalDelete",value:"ProposalDeleteActuator"},{label:"SetAccountId",value:"SetAccountIdActuator"},{label:"ShieldedTransfer",value:"ShieldedTransferActuator"},{label:"Transfer",value:"TransferActuator"},{label:"TransferAsset",value:"TransferAssetActuator"},{label:"UnfreezeAsset",value:"UnfreezeAssetActuator"},{label:"UnfreezeBalance",value:"UnfreezeBalanceActuator"},{label:"UpdateAccount",value:"UpdateAccountActuator"},{label:"UpdateAsset",value:"UpdateAssetActuator"},{label:"UpdateBrokerage",value:"UpdateBrokerageActuator"},{label:"UpdateEnergyLimit",value:"UpdateEnergyLimitContractActuator"},{label:"UpdateSettingContract",value:"UpdateSettingContractActuator"},{label:"VoteWitness",value:"VoteWitnessActuator"},{label:"WithdrawBalance",value:"WithdrawBalanceActuator"},{label:"WitnessCreate",value:"WitnessCreateActuator"},{label:"WitnessUpdate",value:"WitnessUpdateActuator"}],plugindbForm:{dbsetting:"leveldb",dbsettingContent:""},pluginRules:{consensus:[{required:!0,message:this.$t("tronSettingPlaceholder"),trigger:"blur"}]},transcationRules:{transaction:[{required:!0,message:this.$t("tronSettingPlaceholder"),trigger:"blur"}]},plugindbRules:{dbsetting:[{required:!0,message:this.$t("tronSettingPlaceholder"),trigger:"blur"}]}}},created:function(){this.pluginConfigFun(),this.getCurrentStepFun()},methods:{stepClickFun:function(t){this.currentStep=t,this.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:t}),this.pluginConfigFun()},pluginConfigFun:function(){var t=this;i().then((function(t){return t.data})).then((function(n){"dpos"!=n.consensus&&"pbft"!=n.consensus?t.pluginOnsensusForm={consensus:3,consensusContent:n.consensus}:t.pluginOnsensusForm={consensus:n.consensus,consensusContent:""},""!=n.customTransaction?(t.pluginTransactionForm.transactionContent=n.customTransaction,t.pluginTransactionForm.transaction=[].concat(Object(r["a"])(n.transaction),[9])):t.pluginTransactionForm.transaction=n.transaction,"leveldb"!=n.dbEngine&&"rockdb"!=n.dbEngine?t.plugindbForm={dbsetting:3,dbsettingContent:n.dbEngine}:t.plugindbForm={dbsetting:n.dbEngine,dbsettingContent:""}})).catch((function(t){console.log(t)}))},getCurrentStepFun:function(){var t=sessionStorage.getItem("pluginstep")||1;0!=this.currentStep&&(t=t||this.currentStep),this.currentStep=Number(t),this.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:this.currentStep})},previousStepFun:function(t){this.currentStep=this.currentStep-1,this.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:this.currentStep}),this.pluginConfigFun()},saveData:function(t){var n=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(3==n.pluginOnsensusForm.consensus){if(""==n.pluginOnsensusForm.consensusContent)return void n.$message.success(n.$t("tronPluginCustomConsensusModulePlaceholder"));n.pluginOnsensusForm.consensus=n.pluginOnsensusForm.consensusContent}c({consensus:n.pluginOnsensusForm.consensus}).then((function(t){n.$message.success(n.$t("tronPluginConsensusSaveSuccess")),n.currentStep=n.currentStep+1,n.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:n.currentStep}),n.pluginConfigFun()})).catch((function(t){console.log(t)}))}))},saveTranstionData:function(t){var n=this;this.$refs[t].validate((function(t){if(t){if(""!=n.pluginTransactionForm.transactionContent)n.pluginTransactionForm.transaction.forEach((function(t,e){9===t&&n.pluginTransactionForm.transaction.splice(e,1)}));else if(console.log(n.pluginTransactionForm.transaction),n.pluginTransactionForm.transaction.indexOf(9)>0)return void n.$message.success(n.$t("tronPluginCustomTradingModulePlaceholder"));u({transaction:n.pluginTransactionForm.transaction,customTransaction:n.pluginTransactionForm.transactionContent}).then((function(t){n.$message.success(n.$t("tronPluginInputSaveSuccess")),n.currentStep=n.currentStep+1,n.$store.dispatch("tronSetting/getCurrentPluginStepConfig",{step:n.currentStep}),n.pluginConfigFun()})).catch((function(t){console.log(t)}))}}))},saveDBData:function(t){var n=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(3==n.plugindbForm.dbsetting){if(""==n.plugindbForm.dbsettingContent)return void n.$message.success(n.$t("tronPluginCustomDatabaseModulePlaceholder"));n.plugindbForm.dbsetting=n.plugindbForm.dbsettingContent}l({dbEngine:n.plugindbForm.dbsetting}).then((function(t){n.$message.success(n.$t("tronPluginInputSaveSuccess")),n.$router.push({path:"/node/list",query:{deploy:1}})})).catch((function(t){console.log(t)}))}))}}},p=g,d=(e("739b"),e("2877")),m=Object(d["a"])(p,s,a,!1,null,"631f2584",null);n["default"]=m.exports},"739b":function(t,n,e){"use strict";var s=e("e3a3"),a=e.n(s);a.a},aa77:function(t,n,e){var s=e("5ca1"),a=e("be13"),r=e("79e5"),o=e("fdef"),i="["+o+"]",l="​",u=RegExp("^"+i+i+"*"),c=RegExp(i+i+"*$"),g=function(t,n,e){var a={},i=r((function(){return!!o[t]()||l[t]()!=l})),u=a[t]=i?n(p):o[t];e&&(a[e]=u),s(s.P+s.F*i,"String",a)},p=g.trim=function(t,n){return t=String(a(t)),1&n&&(t=t.replace(u,"")),2&n&&(t=t.replace(c,"")),t};t.exports=g},c5f6:function(t,n,e){"use strict";var s=e("7726"),a=e("69a8"),r=e("2d95"),o=e("5dbc"),i=e("6a99"),l=e("79e5"),u=e("9093").f,c=e("11e9").f,g=e("86cc").f,p=e("aa77").trim,d="Number",m=s[d],b=m,f=m.prototype,v=r(e("2aeb")(f))==d,h="trim"in String.prototype,C=function(t){var n=i(t,!1);if("string"==typeof n&&n.length>2){n=h?n.trim():p(n,3);var e,s,a,r=n.charCodeAt(0);if(43===r||45===r){if(e=n.charCodeAt(2),88===e||120===e)return NaN}else if(48===r){switch(n.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+n}for(var o,l=n.slice(2),u=0,c=l.length;u<c;u++)if(o=l.charCodeAt(u),o<48||o>a)return NaN;return parseInt(l,s)}}return+n};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof m&&(v?l((function(){f.valueOf.call(e)})):r(e)!=d)?o(new b(C(n)),e,m):C(n)};for(var S,F=e("9e1e")?u(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;F.length>_;_++)a(b,S=F[_])&&!a(m,S)&&g(m,S,c(b,S));m.prototype=f,f.constructor=m,e("2aba")(s,d,m)}},e3a3:function(t,n,e){},fdef:function(t,n){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);