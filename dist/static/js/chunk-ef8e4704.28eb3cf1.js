(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ef8e4704"],{"0cc3":function(e,t,n){"use strict";var o=n("9da2"),i=n.n(o);i.a},1:function(e,t){},2:function(e,t){},"2f21":function(e,t,n){"use strict";var o=n("79e5");e.exports=function(e,t){return!!e&&o((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"55dd":function(e,t,n){"use strict";var o=n("5ca1"),i=n("d8e8"),a=n("4bf8"),l=n("79e5"),r=[].sort,s=[1,2,3];o(o.P+o.F*(l((function(){s.sort(void 0)}))||!l((function(){s.sort(null)}))||!n("2f21")(r)),"Array",{sort:function(e){return void 0===e?r.call(a(this)):r.call(a(this),i(e))}})},"5ce7":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"tron-content"},[n("div",{staticClass:"tron-filter-section"},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.addNodeFun()}}},[e._v(e._s(e.$t("tronNodeAdd")))]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:e.bulkDeploymentFun}},[e._v(e._s(e.$t("tronNodeBulkDeployment")))])],1),e._v(" "),n("div",{staticClass:"filter-container tron-table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"empty-text":e.$t("tronNodesNoData"),data:e.list,"tooltip-effect":"dark",border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"userName",label:e.$t("tronNodeName"),align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"ip",label:"IP/HOST",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"port",label:"SSH PORT",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("tronNodeWhetherIsSR"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isSR?n("el-tag",{attrs:{type:"success"}},[e._v("yes")]):n("el-tag",{attrs:{type:"danger"}},[e._v("no")])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:e.$t("tronNodeStatus"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(n){return e.viewLogFun(t.row.id)}}},[e._v(e._s(e.$t("tronNodeLog")))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:e.$t("tronNodeOperate"),align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(n){return e.operateNodeFun(t.row)}}},[e._v(e._s(e.$t("tronNodeOperate")))]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.deleteNodeListFun(t.row.id)}}},[e._v(e._s(e.$t("tronNodeDelete")))])]}}])})],1)],1)]),e._v(" "),n("el-dialog",{attrs:{title:e.$t("tronNodeBulkDeployment"),visible:e.deploymentDialogVisible,width:"500px"},on:{"update:visible":function(t){e.deploymentDialogVisible=t}}},[e.isDeploymentStatus?n("div",[n("el-timeline",e._l(e.logInfoData,(function(t,o){return n("el-timeline-item",{key:o,attrs:{type:"primary"}},[e._v(e._s(t))])})),1),e._v(" "),n("el-button",{staticStyle:{"margin-left":"30px"},attrs:{loading:e.deplogUploadLoading}},[e._v(e._s(e.$t("deploymentSearchLoading")))])],1):n("div",[n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:e.currentPath,callback:function(t){e.currentPath=t},expression:"currentPath"}}),e._v(" "),n("div",{staticClass:"el-upload__tip"},[e._v(e._s(e.$t("deploymentUpload")))])],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.deploymentDialogVisible=!1}}},[e._v(e._s(e.$t("tronNodeCancel")))]),e._v(" "),n("el-button",{attrs:{type:"primary",loading:e.deplogUploadLoading},on:{click:e.deployMentFun}},[e._v(e._s(e.$t("tronNodeSave")))])],1)]),e._v(" "),n("el-dialog",{attrs:{title:e.$t("tronNodeStatus"),visible:e.currentLogDialog,width:"400px"},on:{"update:visible":function(t){e.currentLogDialog=t}}},[e.currentlogInfoData.length>0?n("el-timeline",e._l(e.currentlogInfoData,(function(t,o){return n("el-timeline-item",{key:o,attrs:{type:"primary"}},[e._v(e._s(t))])})),1):n("span",[e._v(e._s(e.$t("tronNodeLogNodata")))])],1),e._v(" "),n("operate-node",{attrs:{nodeDialogVisible:e.nodeObj.visible,editStatus:e.nodeObj.status,detailInfoData:e.nodeObj.detail},on:{dialog:e.nodeDetailFun,addNodeSuccess:e.addNodeSuccessFun}})],1)},i=[],a=(n("55dd"),n("96cf"),n("3b8d")),l=(n("ac6a"),n("b775"));function r(e){return Object(l["a"])({url:"/nodeInfo",method:"post",params:e})}function s(e){return Object(l["a"])({url:"/nodeInfo",method:"delete",params:e})}function d(e){return Object(l["a"])({url:"/nodeInfo",method:"PUT",params:e})}function c(e){return Object(l["a"])({url:"/allNodeInfo",method:"get",params:e})}function u(e){return Object(l["a"])({url:"/deployNode",method:"post",params:e})}function p(e){return Object(l["a"])({url:"/getLogInfo",method:"get",params:e})}var m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"viewnodeDialog"},[n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.classLoading,expression:"classLoading"}],attrs:{title:e.dialogTitle,visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"650px",center:""},on:{open:e.openDialogFun,close:e.closeFun,"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"nodeDialogForm",staticClass:"nodeDialogForm",attrs:{rules:e.nodeRules,model:e.nodeForm,"label-width":"130px","label-position":"left"}},[n("el-form-item",{attrs:{label:"ID",prop:"id"}},[n("el-input",{attrs:{maxlength:50,placeholder:e.$t("tronNodeIDPlaceholder"),disabled:1==e.editStatus},model:{value:e.nodeForm.id,callback:function(t){e.$set(e.nodeForm,"id",t)},expression:"nodeForm.id"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("tronNodeName"),prop:"userName"}},[n("el-input",{attrs:{maxlength:50,placeholder:e.$t("tronNodeNamePlaceholder")},model:{value:e.nodeForm.userName,callback:function(t){e.$set(e.nodeForm,"userName",t)},expression:"nodeForm.userName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"IP/HOST",prop:"ip"}},[n("el-input",{attrs:{maxlength:50,placeholder:e.$t("tronNodeIpPlaceholder")},model:{value:e.nodeForm.ip,callback:function(t){e.$set(e.nodeForm,"ip",t)},expression:"nodeForm.ip"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"PORT",prop:"port"}},[n("el-input",{attrs:{maxlength:50,placeholder:e.$t("tronNodePortPlaceholder")},model:{value:e.nodeForm.port,callback:function(t){e.$set(e.nodeForm,"port",t)},expression:"nodeForm.port"}})],1),e._v(" "),n("el-form-item",{attrs:{label:e.$t("tronNodeWhetherIsSR"),prop:"isSR"}},[n("el-select",{attrs:{placeholder:e.$t("tronNodeSRPlaceholder")},model:{value:e.nodeForm.isSR,callback:function(t){e.$set(e.nodeForm,"isSR",t)},expression:"nodeForm.isSR"}},e._l(e.srAry,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),e.nodeForm.isSR?n("el-form-item",{attrs:{label:"privateKey",prop:"privateKey"}},[n("el-input",{attrs:{type:"textarea",maxlength:100,placeholder:e.$t("tronNodePrivateKeyPlaceholder")},model:{value:e.nodeForm.privateKey,callback:function(t){e.$set(e.nodeForm,"privateKey",t)},expression:"nodeForm.privateKey"}})],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"textCenter",attrs:{"label-width":"0"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveData("nodeDialogForm")}}},[e._v(e._s(e.$t("tronNodeSave")))]),e._v(" "),n("el-button",{on:{click:e.cancelFun}},[e._v(e._s(e.$t("tronNodeCancel")))])],1)],1)],1)],1)},g=[],f=n("61f7"),h=n("d01b"),v=n.n(h),b={name:"operationNode",props:["nodeDialogVisible","detailInfoData","editStatus"],data:function(){var e=this,t=function(t,n,o){Object(f["b"])(n)?o():o(new Error(e.$t("tronSettingNumberPlaceholder")))},n=function(t,n,o){console.log(n,"value");var i=v.a.address.fromPrivateKey(n);console.log(i),v.a.isAddress(i)?o():o(new Error(e.$t("tronSettingAddressPlaceholder")))};return{classLoading:!1,dialogVisible:this.nodeDialogVisible,dialogTitle:1==this.editStatus?this.$t("tronNodeEditTitle"):this.$t("tronNodeAdd"),nodeForm:{id:"",userName:"",ip:"",port:"",isSR:""},srAry:[{id:0,label:"是",value:!0},{id:1,label:"否",value:!1}],nodeRules:{id:[{required:!0,message:this.$t("tronNodeIDPlaceholder"),trigger:"blur"},{required:!0,validator:t,trigger:"blur"}],userName:[{required:!0,message:this.$t("tronNodeNamePlaceholder"),trigger:"blur"}],ip:{required:!0,message:this.$t("tronNodeIpPlaceholder"),trigger:"blur"},port:[{required:!0,message:this.$t("tronNodePortPlaceholder"),trigger:"blur"},{required:!0,validator:t,trigger:"blur"}],isSR:{required:!0,message:this.$t("tronNodeSRPlaceholder"),trigger:"blur"},privateKey:[{required:!0,message:this.$t("tronNodePrivateKeyPlaceholder"),trigger:"blur"},{required:!0,validator:n,trigger:"blur"}]}}},methods:{openDialogFun:function(){},closeFun:function(){this.dialogVisible=!1,this.$emit("addNodeSuccess",!0)},cancelFun:function(){this.dialogVisible=!1,this.$emit("addNodeSuccess",!0)},saveData:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;1!=t.editStatus?r(t.nodeForm).then((function(e){t.$emit("addNodeSuccess",!0),t.$refs.nodeDialogForm.resetFields(),t.$message.success(t.$t("tronNodeAddSuccess")),t.dialogVisible=!1})).catch((function(e){console.log(e)})):d(t.nodeForm).then((function(e){t.$emit("addNodeSuccess",!0),t.$refs.nodeDialogForm.resetFields(),t.$message.success(t.$t("tronNodeAddSuccess")),t.dialogVisible=!1})).catch((function(e){console.log(e)}))}))}},watch:{detailInfoData:function(e){this.nodeForm=this.detailInfoData},nodeDialogVisible:function(e){this.dialogVisible=e},dialogVisible:function(e){this.$emit("dialog",e)}}},N=b,y=(n("0cc3"),n("2877")),$=Object(y["a"])(N,m,g,!1,null,"1c2feaec",null),F=$.exports,_={name:"nodelist",components:{operateNode:F},data:function(){return{list:[],currentlogInfoData:[],deplogUploadLoading:!1,deploymentDialogVisible:!1,isDeploymentStatus:!1,currentLogDialog:!1,listLoading:!1,currentPath:"",filterItem:{name:""},listQuery:{limit:20,page:1,total:0},nodeObj:{visible:!1,detail:{},status:0},logInfoData:[],multipleSelection:[]}},computed:{multipleSelectionIds:function(){var e=this,t=[];return this.multipleSelection.map((function(n){t.push({id:n.id,path:e.currentPath})})),t}},created:function(){this.getDataListFun()},methods:{sortIdFun:function(e,t){return e.id-t.id},addNodeFun:function(){this.list.length>50?this.$message({type:"info",message:this.$t("tronNodesMaxTips")}):(this.nodeObj.detail={},this.nodeObj.status=0,this.nodeObj.visible=!0)},operateNodeFun:function(e){this.nodeObj.detail=e,this.nodeObj.status=1,this.nodeObj.visible=!0},viewLogFun:function(e){var t=this;p({id:e}).then((function(e){return e.data})).then((function(e){t.currentlogInfoData=e.logInfo,t.currentLogDialog=!0})).catch((function(e){}))},deployMentFun:function(){var e=this;this.deplogUploadLoading=!0,this.multipleSelectionIds.forEach(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.deployNodeApiFun(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deployNodeApiFun:function(e){var t=this;u(e).then((function(n){t.$message({type:"success",message:t.$t("deploymentLoading")}),t.isDeploymentStatus=!0,t.viewNodeListFun(e.id)})).catch((function(e){t.deplogUploadLoading=!1}))},viewNodeListFun:function(e){var t=this,n=setInterval((function(){p({id:e}).then((function(e){return e.data})).then((function(e){t.logInfoData=e.logInfo,t.logInfoData.forEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Finish"!=o){e.next=7;break}return clearInterval(n),e.next=4,t.getDataListFun();case 4:t.deplogUploadLoading=!1,t.deploymentDialogVisible=!1,t.$message({type:"info",message:t.$t("deploymentSuccess")});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){t.deplogUploadLoading=!1,clearInterval(n)}))}),2e3)},bulkDeploymentFun:function(){this.multipleSelectionIds.length>0?this.deploymentDialogVisible=!0:this.$message({type:"warning",message:this.$t("deploymentSelectTips")})},getDataListFun:function(){var e=this;c().then((function(e){return e.data})).then((function(t){var n=t;e.list=n.sort(e.sortIdFun)})).catch((function(e){console.log(e)}))},handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.listQuery.limit=e,this.getDataListFun()},handleCurrentChange:function(e){this.listQuery.page=e,this.getDataListFun()},deleteNodeListFun:function(e){var t=this;this.$confirm(this.$t("tronNodesDeleteTips"),this.$t("tronNodesDeleteTipsTitle"),{confirmButtonText:this.$t("tronNodeDetermine"),cancelButtonText:this.$t("tronNodeCancel"),type:"warning"}).then((function(){s({id:e}).then((function(e){t.$message.success(t.$t("tronNodesDeleteSuccess")),t.getDataListFun()})).catch((function(e){}))})).catch((function(){t.$message({type:"info",message:t.$t("tronNodesCancelDelete")})}))},nodeDetailFun:function(e){this.nodeObj.visible=e},addNodeSuccessFun:function(e){e&&this.getDataListFun()}}},D=_,S=(n("dbb3"),Object(y["a"])(D,o,i,!1,null,"079f421c",null));t["default"]=S.exports},"9da2":function(e,t,n){},a977:function(e,t,n){},dbb3:function(e,t,n){"use strict";var o=n("a977"),i=n.n(o);i.a}}]);